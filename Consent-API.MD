
# Consent APIs
1.Consent Handle Request
   HTTP Verb - POST
   ## API Endpoint - /v3/consent/consentHandleRequest

   This API is used to request the lenders to send a consent request for fetching the bank account statements, GST historical data. The lender (FIU) checks with the AA and        
   creates a consent handle internally once this API is triggered

   ## Request Payload

   |Key               |Type    |Validations |Mandatory |Description|
   |------------------|:------:|:----------:|:--------:|----------:|
   |metadata          |Metadata|            |Yes       |Metadata specific to each API response.|
   |loanApplicationIds|Array Alphanumeric |Ids are of length 35 each|Yes|UUID for the loan applications,Generated by LSP.   These are the list of loan Applications for which borrower wants consents to be created.|
   |requestId|Alphanumeric|Length 35|Yes|UUID used to tie request and response and for idempotency.|
   |consent|Consent||Yes|This includes the consent details needed for the loan.|
   
   ## Response payload
   
   |Key               |Type    |Validations |Mandatory |Description|
   |----|:----:|:----------:|:--------:|----------:|
   |ack |ACK   |            |Yes       |Acknowledgement block indicating the receipt and status of request|
   
   ## Sample Request Json
   
   ``` {
   "metadata": {
       "version": "1.0",
       "timestamp": "2020-12-01T11:39:57.153Z",
       "traceId": "e8cc6822bd4bbb4eb1b9e1b4996fbff8acb",
       "orgId": "LSP123"
   },
   "loanApplicationIds": [
       "f8cc6822bd4bbb4eb1b9e1b4996fbff8acb"
   ],
   "requestId": "g8cc6822bd4bbb4eb1b9e1b4996fbff8acb",
   "consent": {
       "consentFetchType": "ONETIME",
       "vua": "user@aa.in",
       "isAggregationEnabled": true,
       "consentAggregationId": "e8cc6822bd4bbb4eb1b9e1b4996fbff8acd",
       "lspInfo": {
           "lspId": "<AA can identify the LSP based on this>",
           "version": "<version of LSP>",
           "appName": "<Package name of the app>"
       }
   }
} 
```

## Sample Response Json
```
{
  "ack": {
    "error": "0",
    "traceId": "h8cc6822bd4bbb4eb1b9e1b4996fbff8acb",
    "timestamp": "2020-12-01T11:39:57.153Z"
  }
}
```
